
\chapter{历法}
\label{chap:calendar}

\epigraph{清明时节雨纷纷，路上行人欲断魂。\\借问酒家何处有，牧童遥指杏花村。}{唐·杜牧《清明》}

清明是中国从古流传至今的二十四节气之一，而公历是近代才传入中国的，为什么每年的清明不是公历4月4日就是4月5日呢？

\section{太阳历}
\label{sec:solar-calendars}

太阳历又称为阳历，是以地球绕太阳公转的运动周期为基础而制定的历法。

\begin{definition}[回归年，太阳年，Tropical Year，Solar Year]
  太阳年是指在地球上观察到太阳回到同一个地方所需要的时间，即地球绕太阳旋转一周所需要的时间，大约是$365.2422$天。
\end{definition}

由于太阳年不是整数，而历年都是整数天数，所以通常为的历法都是在历年中插入天数来调整。在太阳历中，平年有365天，大约每隔4年就要添加一日(闰日)，该年就是有366天的闰年。儒略历(Julian Calendar)就采用这种置闰方式。

按儒略历每4年一闰日，日历上过了4年为$1+365\times4$天，而实际的4个太阳年共有$365.2422\times4$天，从而4年下来其误差为$1+365\times4-365.2422\times4=1-0.2422\times4=0.0312$天，再扩大一下，日历上过了400年，则与实际的400个太阳年误差为3.12天，即比太阳年多跑了3.12天。为解决这个误差，格里历(Gregorian Calendar)，即现在通用的公历，在每400年中去掉3个闰年。格里历的置闰规则如下：
\begin{quotation}
  四年一闰，百年不闰，四百年再闰。
\end{quotation}

剩余的每400年产生的$3.12-3=0.12$天的误差，就需要后人在用到时继续修正了。

\begin{definition}[闰年，Leap Year]
  2月份有28天的称为平年，2月份有29天的称为闰年。确定平年闰年的方法是：
  \begin{enumerate}
  \item 能被400整除的年份定为闰年；
  \item 否则能被100整除的年份定为平年；
  \item 否则能被4整除的年份定为闰年；
  \item 其余年份定为平年。
  \end{enumerate}
  即不能被4整除的都是平年；能被400整除的是闰年；不能被400整除但能被100整除的是平年；不能被100整除但能被4整除的是闰年。
\end{definition}

闰年置闰日的方法是在当年2月份增加一天，从原来的28天加到29天。

\begin{table}[htbp]
  \centering
  \begin{minipage}{\textwidth}  %for footnote in tabular
  \begin{tabular}{ccccccccccccc}
    \toprule
    月份 & 1  & 2          & 3  & 4  & 5  & 6  & 7  & 8  & 9  & 10 & 11 & 12\\\midrule
    天数 & 31 & 28\footnote{平年28天，闰年29天} & 31 & 30 & 31 & 30 & 31 & 31 & 30 & 31 & 30 & 31\\
    \bottomrule
  \end{tabular}
  \end{minipage}
\caption{每月天数}
  \label{tab:days-of-months}
\end{table}

\begin{example}
  公元1900年是平年，因为$400\notdivides 1900$，且$100\mid 1900$。公元2012年是闰年，因为$4\mid 2012$且$100\notdivides 2012$。
\end{example}

\begin{example}
  小明已经上小学6年级了，可是他却说：“我妈妈说我每个生日都没有落下，可是我到现在为止总共才给我过了3个生日。”小明说的有可能吗？
\end{example}
\begin{proof}[提示]
  比如闰年闰日过生日。
\end{proof}

\begin{example}
  小明是2013年入学的小学生，今年全家去旅行，过了三天后回家。到家后小明一连撕掉了3张日历。姨妈打电话过来问起小明什么时候去的旅行，小明说不记得了，只记得刚刚撕掉的3张日历的数字和是32。那么你知道小明旅行是在哪一年吗？
\end{example}
\begin{proof}
  撕掉3张日历，暗示了这3张正好对应小明旅行的3天日期。两种情况，一是3天都是同一月份，二是3天在不同的月份。

  如果3天是同一月份，则连续3天的日期之和应能被3整除，然而32并不能被3整除，排除这种情况。

  3天不在同一月份，则必须有一天是上月月末，一天是当月月初一号，另外一天可能是当月2号，也可能是上月倒数第二天。如果是上月月末一天外加当月一号二号两天，则上月月末日期数字为$32-1-2=29$。如果是当月一号外加上月最后两天，则上月最后两天的日期数字之和为$32-1=31$，不可能，因为每月最后两天日期数字之和最小的也有$27+28>31$。所以被撕掉的3天日期的唯一情况是$29,1,2$。

  从而当年是闰年。从2013年开始的闰年按顺序依次为：$2016,2020,2024,\cdots$。而小明是2013年上的小学，题目中说明全家旅行时小明仍然是小学生。如果是2020年的2月份去的旅行，那么小明在旅行时应该已经是初中二年级上学期了，所以题目中说的今年只能是2016年。
\end{proof}


\section{太阴历}
\label{sec:tai-yin-calendar}



\section{大明历}
\label{sec:da-ming-calendar}

祖冲之在公元465(也有人说是公元462年，即刘宋大明六年)制定了大明历。祖冲之在此之前就测得了地球围绕太阳旋转一周的天数大约为365.24281481天。由于该数不是正整数，古人制定历法，很重要的一件事情就是对历法调整安排，使得制定的历法与季节的循环相匹配。

\section{节气}
\label{sec:jie-qi}

古人把$360^\circ$黄经划分24等分，每隔$15^\circ$为一节气，其中$0^\circ$为春分，夏至是$90^\circ$，秋分是$180^\circ$，冬至是$270^\circ$。而太阳黄经在$15^\circ$时则定为清明，太阳直射北回归线之日即中国北方最热之时定为夏至，如图~\ref{fig:24-jie-qi}所示。

公历(即格里历)是根据太阳年来确定，其日期是与黄经基本是一一对应的，误差在一日之内(闰日)，所以黄经每个角度对应的公历日期基本是固定的，所以节气在公历上的体现也基本是固定的，误差也在一日之内。

\begin{figure}[htbp]
  \centering
  \begin{tikzpicture}[scale=1.0]
    \draw(0,0)circle(5);
    \foreach \a/\v in {0/春分,15/清明,30/谷雨,45/立夏,60/小满,75/芒种,90/夏至,
      105/小暑,120/大暑,135/立秋,150/处暑,165/白露,180/秋分,
      195/寒露,210/霜降,225/立冬,240/小雪,255/大雪,270/冬至,
      285/小寒,300/大寒,315/立春,330/雨水,345/惊蛰
    }{
      \draw(0,0)--(90-\a:5.2)node[pos=1.1]{\v};
    }
    \foreach \a/\r/\v in {0/4.5/$0^\circ$, 90/4.3/$90^\circ$, 180/4.5/$180^\circ$, 270/4.2/$270^\circ$}{
      \draw[very thick](0,0)--(90-\a:5.2);
      \node[fill=white] at(90-\a:\r) {\v};
    }
    \foreach \a/\r/\v in {45/4.3/$45^\circ$, 135/4.3/$135^\circ$, 225/4.2/$225^\circ$, 315/4.2/$315^\circ$}{
      % \draw[very thick](0,0)--(90-\a:5.2);
      \node[fill=white] at(90-\a:\r) {\v};
    }
  \end{tikzpicture}
  \caption{二十四节气}
  \label{fig:24-jie-qi}
\end{figure}

节气是古人用于指导工作的，如春耕、播种等，与太阳与地球的相对位置密切相关的。节气实际上是一种阳历。即中国古代所使用的历法既包括阴历，也包括阳历(节气)，所以实际上是一种阴阳历。